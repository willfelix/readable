{"ast":null,"code":"import * as api from '../utils/api';\nimport { showLoading, hideLoading } from 'react-redux-loading';\nexport var GET_POSTS = 'GET_POSTS';\nexport var SORT_POST = 'SORT_POST';\nexport var VOTE_POST = 'VOTE_POST';\nexport var CREATE_POST = 'CREATE_POST';\nexport var DELETE_POST = 'DELETE_POST';\nexport var UPDATE_POST = 'UPDATE_POST';\n\nvar votePost = function votePost(vote, id) {\n  return {\n    type: VOTE_POST,\n    id: id,\n    vote: vote\n  };\n};\n\nvar deletePost = function deletePost(id) {\n  return {\n    type: DELETE_POST,\n    id: id\n  };\n};\n\nvar updatePost = function updatePost(post) {\n  return {\n    type: UPDATE_POST,\n    post: post\n  };\n};\n\nvar createPost = function createPost(post) {\n  return {\n    type: CREATE_POST,\n    post: post\n  };\n};\n\nexport var sortPosts = function sortPosts(sortBy) {\n  return {\n    type: SORT_POST,\n    sortBy: sortBy\n  };\n};\nexport var getPosts = function getPosts() {\n  var posts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var sortBy = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'timestamp';\n  return {\n    type: GET_POSTS,\n    posts: posts,\n    sortBy: sortBy\n  };\n};\nexport function handleVotePost(vote, id) {\n  return function (dispatch) {\n    dispatch(votePost(vote, id));\n    return api.votePost(vote, id);\n  };\n}\nexport function handleDeletePost(id) {\n  return function (dispatch) {\n    dispatch(deletePost(id));\n    return api.deletePost(id);\n  };\n}\nexport function handleCreatePost(title, body, category) {\n  return function (dispatch, getState) {\n    var _getState = getState(),\n        authedUser = _getState.authedUser;\n\n    var timestamp = Date.now();\n    dispatch(showLoading());\n    return api.createPost({\n      id: timestamp.toString(),\n      timestamp: timestamp,\n      title: title,\n      body: body,\n      category: category,\n      author: authedUser\n    }).then(function (post) {\n      return dispatch(createPost(post));\n    }).then(function () {\n      return dispatch(hideLoading());\n    });\n  };\n}\nexport function handleUpdatePost(id, title, body) {\n  return function (dispatch) {\n    dispatch(showLoading());\n    return api.updatePost({\n      id: id,\n      title: title,\n      body: body\n    }).then(function (post) {\n      return dispatch(updatePost(post));\n    }).then(function () {\n      return dispatch(hideLoading());\n    });\n  };\n}","map":{"version":3,"sources":["/Users/willfelix/Documents/code/study/projects-udacity-nanodegree/readable/frontend/src/actions/posts.js"],"names":["api","showLoading","hideLoading","GET_POSTS","SORT_POST","VOTE_POST","CREATE_POST","DELETE_POST","UPDATE_POST","votePost","vote","id","type","deletePost","updatePost","post","createPost","sortPosts","sortBy","getPosts","posts","handleVotePost","dispatch","handleDeletePost","handleCreatePost","title","body","category","getState","authedUser","timestamp","Date","now","toString","author","then","handleUpdatePost"],"mappings":"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","sourcesContent":["import * as api from '../utils/api'\nimport { showLoading, hideLoading } from 'react-redux-loading'\n\nexport const GET_POSTS = 'GET_POSTS'\nexport const SORT_POST = 'SORT_POST'\nexport const VOTE_POST = 'VOTE_POST'\nexport const CREATE_POST = 'CREATE_POST'\nexport const DELETE_POST = 'DELETE_POST'\nexport const UPDATE_POST = 'UPDATE_POST'\n\nconst votePost = (vote, id) => ({\n\ttype: VOTE_POST,\n\tid,\n\tvote\n});\n\nconst deletePost = (id) => ({\n\ttype: DELETE_POST,\n\tid\n});\n\nconst updatePost = (post) => ({\n\ttype: UPDATE_POST,\n\tpost\n});\n\nconst createPost = (post) => ({\n\ttype: CREATE_POST,\n\tpost\n});\n\nexport const sortPosts = (sortBy) => ({\n\ttype: SORT_POST,\n\tsortBy\n});\n\nexport const getPosts = (posts = [], sortBy = 'timestamp') => ({\n\ttype: GET_POSTS,\n\tposts,\n\tsortBy\n});\n\nexport function handleVotePost (vote, id) {\n\treturn (dispatch) => {\n\t\tdispatch( votePost(vote, id) );\n\t\treturn api.votePost(vote, id);\n\t}\n}\n\nexport function handleDeletePost (id) {\n\treturn (dispatch) => {\n\t\tdispatch( deletePost(id) );\n\t\treturn api.deletePost(id);\n\t}\n}\n\nexport function handleCreatePost (title, body, category) {\n\treturn (dispatch, getState) => {\n\t\tconst { authedUser } = getState()\n\t\tconst timestamp = Date.now();\n\n\t\tdispatch(showLoading())\n\n\t\treturn api.createPost({\n\t\t\tid: timestamp.toString(),\n\t\t\ttimestamp,\n\t\t\ttitle,\n\t\t\tbody,\n\t\t\tcategory,\n\t\t\tauthor: authedUser\n\t\t})\n\t\t.then(post => dispatch( createPost(post) ))\n\t\t.then(() => dispatch( hideLoading() ))\n\t}\n}\n\nexport function handleUpdatePost (id, title, body) {\n\treturn (dispatch) => {\n\n\t\tdispatch( showLoading() )\n\n\t\treturn api.updatePost({\n\t\t\tid,\n\t\t\ttitle,\n\t\t\tbody\n\t\t})\n\t\t.then(post => dispatch( updatePost(post) ))\n\t\t.then(() => dispatch( hideLoading() ))\n\t}\n}"]},"metadata":{},"sourceType":"module"}