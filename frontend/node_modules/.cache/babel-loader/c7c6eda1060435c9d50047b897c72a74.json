{"ast":null,"code":"import _objectSpread from \"/Users/willfelix/Documents/code/study/projects-udacity-nanodegree/readable/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/willfelix/Documents/code/study/projects-udacity-nanodegree/readable/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar request = function request(path) {\n  var method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n  var body = arguments.length > 2 ? arguments[2] : undefined;\n  var base = process.env.REACT_APP_BACKEND || 'http://localhost:3001';\n  return fetch(\"\".concat(base).concat(path), {\n    method: method,\n    body: JSON.stringify(body),\n    headers: {\n      'Authorization': 'w1',\n      'Content-Type': 'application/json'\n    }\n  }).then(function (res) {\n    return res.json();\n  });\n};\n\nexport var init = function init() {\n  var requests = [request('/categories'), request('/posts')];\n  return Promise.all(requests).then(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        categories = _ref2[0],\n        posts = _ref2[1];\n\n    return {\n      categories: categories,\n      posts: posts\n    };\n  });\n};\nexport var votePost = function votePost(vote, id) {\n  return request('/posts', 'POST', _objectSpread({}, post)).then(function (data) {\n    return Object.assign(post, data);\n  });\n};\nexport var createPost = function createPost(post) {\n  return request('/posts', 'POST', _objectSpread({}, post)).then(function (data) {\n    return Object.assign(post, data);\n  });\n};\nexport var updatePost = function updatePost(post) {\n  return request(\"/posts/\".concat(post.id), 'PUT', _objectSpread({}, post));\n};\nexport var deletePost = function deletePost(id) {\n  return request(\"/posts/\".concat(id), 'DELETE');\n};","map":{"version":3,"sources":["/Users/willfelix/Documents/code/study/projects-udacity-nanodegree/readable/frontend/src/utils/api.js"],"names":["request","path","method","body","base","process","env","REACT_APP_BACKEND","fetch","JSON","stringify","headers","then","res","json","init","requests","Promise","all","categories","posts","votePost","vote","id","post","data","Object","assign","createPost","updatePost","deletePost"],"mappings":";;;AAAA,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAACC,IAAD,EAAgC;AAAA,MAAzBC,MAAyB,uEAAhB,KAAgB;AAAA,MAATC,IAAS;AAC/C,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,IAAkC,uBAA/C;AAEA,SAAOC,KAAK,WAAIJ,IAAJ,SAAWH,IAAX,GAAmB;AAC9BC,IAAAA,MAAM,EAANA,MAD8B;AAE9BC,IAAAA,IAAI,EAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf,CAFwB;AAG9BQ,IAAAA,OAAO,EAAE;AAAE,uBAAiB,IAAnB;AAAyB,sBAAgB;AAAzC;AAHqB,GAAnB,CAAL,CAIJC,IAJI,CAIC,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GAJJ,CAAP;AAKA,CARD;;AAUA,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AACzB,MAAMC,QAAQ,GAAG,CAChBhB,OAAO,CAAC,aAAD,CADS,EAEhBA,OAAO,CAAC,QAAD,CAFS,CAAjB;AAKA,SAAOiB,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAAsBJ,IAAtB,CAA2B;AAAA;AAAA,QAAEO,UAAF;AAAA,QAAcC,KAAd;;AAAA,WAA0B;AAC3DD,MAAAA,UAAU,EAAEA,UAD+C;AAE3DC,MAAAA,KAAK,EAAEA;AAFoD,KAA1B;AAAA,GAA3B,CAAP;AAIA,CAVM;AAYP,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD,EAAOC,EAAP,EAAc;AACrC,SAAOvB,OAAO,CAAC,QAAD,EAAW,MAAX,oBACVwB,IADU,EAAP,CAEJZ,IAFI,CAEC,UAAAa,IAAI;AAAA,WAAIC,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoBC,IAApB,CAAJ;AAAA,GAFL,CAAP;AAGA,CAJM;AAMP,OAAO,IAAMG,UAAU,GAAG,SAAbA,UAAa,CAACJ,IAAD,EAAU;AACnC,SAAOxB,OAAO,CAAC,QAAD,EAAW,MAAX,oBACVwB,IADU,EAAP,CAEJZ,IAFI,CAEC,UAAAa,IAAI;AAAA,WAAIC,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoBC,IAApB,CAAJ;AAAA,GAFL,CAAP;AAGA,CAJM;AAMP,OAAO,IAAMI,UAAU,GAAG,SAAbA,UAAa,CAACL,IAAD,EAAU;AACnC,SAAOxB,OAAO,kBAAWwB,IAAI,CAACD,EAAhB,GAAsB,KAAtB,oBACVC,IADU,EAAd;AAGA,CAJM;AAMP,OAAO,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAACP,EAAD,EAAQ;AACjC,SAAOvB,OAAO,kBAAWuB,EAAX,GAAiB,QAAjB,CAAd;AACA,CAFM","sourcesContent":["const request = (path, method = 'GET', body) => {\n\tconst base = process.env.REACT_APP_BACKEND ||  'http://localhost:3001';\n\t\n\treturn fetch(`${base}${path}`, { \n\t\tmethod,\n\t\tbody: JSON.stringify(body),\n\t\theaders: { 'Authorization': 'w1', 'Content-Type': 'application/json' }\n\t}).then(res => res.json())\n}\n\nexport const init = () => {\n\tconst requests = [\n\t\trequest('/categories'),\n\t\trequest('/posts')\n\t];\n\n\treturn Promise.all(requests).then(([categories, posts]) => ({ \n\t\tcategories: categories, \n\t\tposts: posts\n\t}));\n}\n\nexport const votePost = (vote, id) => {\n\treturn request('/posts', 'POST', {\n\t\t...post\n\t}).then(data => Object.assign(post, data));\n}\n\nexport const createPost = (post) => {\n\treturn request('/posts', 'POST', {\n\t\t...post\n\t}).then(data => Object.assign(post, data));\n}\n\nexport const updatePost = (post) => {\n\treturn request(`/posts/${post.id}`, 'PUT', {\n\t\t...post\n\t});\n}\n\nexport const deletePost = (id) => {\n\treturn request(`/posts/${id}`, 'DELETE');\n}"]},"metadata":{},"sourceType":"module"}